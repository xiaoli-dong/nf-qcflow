#!/bin/bash

#SBATCH --job-name=nf-qcflow-test
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=2
#SBATCH --time=24:00:00
#SBATCH --mem=4G
#SBATCH -o slurm-%j.out
#SBATCH -e slurm-%j.err

# ---------------------------------------------------------------------

# ACTIVATE conda
eval "$(conda shell.bash hook)"
conda activate

conda activate nf-core-3
echo "Current working directory: `pwd`"
echo "Starting run at: `date`"
# ---------------------------------------------------------------------
# --platform value: illumina|nanopore|hybrid
#
nextflow run /nfs/Genomics_DEV/projects/xdong/deve/nf-qcflow/main.nf \
    -profile singularity,slurm \
    -c ./custom_qcflow.config \
    --input ./samplesheet.csv \
    --platform hybrid \
    --outdir  results \
    -resume

# ---------------------------------------------------------------------
echo "Job finished with exit code $? at: `date`"
conda deactivate

# ---------------------------------------------------------------------
